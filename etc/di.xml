<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Unzer\PAPI\Api\CheckoutInterface" type="Unzer\PAPI\Api\Checkout"/>

    <virtualType name="Unzer\PAPI\Logger\Logger" type="\Magento\Framework\Logger\Monolog">
        <arguments>
            <argument name="name" xsi:type="string">unzer</argument>
            <argument name="handlers" xsi:type="array">
                <item name="debug" xsi:type="object">Unzer\PAPI\Model\Logger\Handler\Debug</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Unzer\PAPI\Model\Logger\DebugHandler">
        <arguments>
            <argument name="logger" xsi:type="object">Unzer\PAPI\Logger\Logger</argument>
        </arguments>
    </type>

    <type name="Unzer\PAPI\Controller\Webhooks\Process">
        <arguments>
            <argument name="logger" xsi:type="object">Unzer\PAPI\Logger\Logger</argument>
        </arguments>
    </type>

    <type name="Unzer\PAPI\Model\Command\AbstractCommand">
        <arguments>
            <argument name="logger" xsi:type="object">Unzer\PAPI\Logger\Logger</argument>
        </arguments>
    </type>

    <virtualType name="UnzerAuthorizeAndCaptureCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="authorize" xsi:type="string">Unzer\PAPI\Model\Command\Authorize</item>
                <item name="cancel" xsi:type="string">Unzer\PAPI\Model\Command\Cancel</item>
                <item name="capture" xsi:type="string">Unzer\PAPI\Model\Command\Capture</item>
                <item name="order" xsi:type="string">Unzer\PAPI\Model\Command\Order</item>
                <item name="refund" xsi:type="string">Unzer\PAPI\Model\Command\Refund</item>
                <item name="refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Command\Refund</item>
                <item name="void" xsi:type="string">Unzer\PAPI\Model\Command\Cancel</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerCaptureCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="cancel" xsi:type="string">Unzer\PAPI\Model\Command\Cancel</item>
                <item name="capture" xsi:type="string">Unzer\PAPI\Model\Command\Capture</item>
                <item name="order" xsi:type="string">Unzer\PAPI\Model\Command\Order</item>
                <item name="refund" xsi:type="string">Unzer\PAPI\Model\Command\Refund</item>
                <item name="refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Command\Refund</item>
                <item name="void" xsi:type="string">Unzer\PAPI\Model\Command\Cancel</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- must be configured to avoid DI compilation errors since Base is interpreted as a normal payment method
         and thus requires a configuration, even though it is not used as payment method -->
    <virtualType name="UnzerBaseConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_BASE</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBaseConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerBaseConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBaseValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerBaseConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBaseValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerBaseConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBaseValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerBaseValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Base">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_BASE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerBaseValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerBaseValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerAuthorizeAndCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Cards payment method-->
    <virtualType name="UnzerCardsConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_CARDS</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerCardsConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerCardsConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerCardsValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerCardsConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerCardsValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerCardsConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerCardsValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerCardsValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Cards">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_CARDS</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerCardsValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerCardsValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerAuthorizeAndCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for DirectDebit payment method -->
    <virtualType name="UnzerDirectDebitConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_DIRECT_DEBIT</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerDirectDebitConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerDirectDebitConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerDirectDebitConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerDirectDebitValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\DirectDebit">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_DIRECT_DEBIT</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerDirectDebitValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerDirectDebitValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for DirectDebitSecured payment method  -->
    <virtualType name="UnzerDirectDebitSecuredConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_DIRECT_DEBIT_SECURED</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitSecuredConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerDirectDebitSecuredConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitSecuredValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerDirectDebitSecuredConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitSecuredValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerDirectDebitSecuredConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerDirectDebitSecuredValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerDirectDebitSecuredValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\DirectDebitSecured">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_DIRECT_DEBIT_SECURED</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerDirectDebitSecuredValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerDirectDebitSecuredValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for BankTransfer payment method  -->
    <virtualType name="UnzerBankTransferConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_BANK_TRANSFER</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBankTransferConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerBankTransferConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBankTransferValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerBankTransferConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBankTransferValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerBankTransferConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBankTransferValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerBankTransferValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\BankTransfer">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_BANK_TRANSFER</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerBankTransferValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerBankTransferValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Ideal payment method  -->
    <virtualType name="UnzerIdealConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_IDEAL</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerIdealConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerIdealConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerIdealValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerIdealConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerIdealValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerIdealConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerIdealValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerIdealValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Ideal">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_IDEAL</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerIdealValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerIdealValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Invoice payment method  -->
    <virtualType name="UnzerInvoiceConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_INVOICE</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerInvoiceConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerInvoiceConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_capture" xsi:type="string">Unzer\PAPI\Model\Config\InvoiceCaptureHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerInvoiceConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerInvoiceValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Invoice">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_INVOICE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Unzer\PAPI\Block\Info\Invoice</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerInvoiceValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerInvoiceValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for InvoiceSecuredB2b payment method  -->
    <virtualType name="UnzerInvoiceSecuredB2bConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_INVOICE_SECURED_B2B</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredB2bConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerInvoiceSecuredB2bConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredB2bValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerInvoiceSecuredB2bConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_capture" xsi:type="string">Unzer\PAPI\Model\Config\InvoiceCaptureHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredB2bValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerInvoiceSecuredB2bConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredB2bValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerInvoiceSecuredB2bValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\InvoiceSecuredB2b">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_INVOICE_SECURED_B2B</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Unzer\PAPI\Block\Info\InvoiceSecuredB2b</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerInvoiceSecuredB2bValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerInvoiceSecuredB2bValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for InvoiceSecured payment method  -->
    <virtualType name="UnzerInvoiceSecuredConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_INVOICE_SECURED</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerInvoiceSecuredConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerInvoiceSecuredConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_capture" xsi:type="string">Unzer\PAPI\Model\Config\InvoiceCaptureHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerInvoiceSecuredConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerInvoiceSecuredValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerInvoiceSecuredValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\InvoiceSecured">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_INVOICE_SECURED</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Unzer\PAPI\Block\Info\InvoiceSecured</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerInvoiceSecuredValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerInvoiceSecuredValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for PayPal payment method  -->
    <virtualType name="UnzerPaypalConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_PAYPAL</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPaypalConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerPaypalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPaypalValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerPaypalConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPaypalValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerPaypalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPaypalValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerPaypalValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Paypal">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_PAYPAL</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerPaypalValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerPaypalValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerAuthorizeAndCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Sofort payment method-->
    <virtualType name="UnzerSofortConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_SOFORT</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerSofortConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerSofortValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerSofortConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerSofortValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerSofortValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerSofortValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Sofort">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_SOFORT</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerSofortValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerSofortValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Giropay payment method-->
    <virtualType name="UnzerGiropayConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_GIROPAY</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerGiropayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerGiropayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerGiropayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerGiropayConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerGiropayValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerGiropayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerGiropayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerGiropayValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Giropay">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_GIROPAY</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerGiropayValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerGiropayValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for EPS payment method-->
    <virtualType name="UnzerEPSConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_EPS</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerEPSConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerEPSConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerEPSValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerEPSConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerEPSValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerEPSConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerEPSValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerEPSValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\EPS">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_EPS</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerEPSValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerEPSValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Alipay payment method  -->
    <virtualType name="UnzerAlipayConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_ALIPAY</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerAlipayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerAlipayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerAlipayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerAlipayConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerAlipayValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerAlipayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerAlipayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerAlipayValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Alipay">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_ALIPAY</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerAlipayValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerAlipayValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerAuthorizeAndCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for WeChat Pay payment method  -->
    <virtualType name="UnzerWechatpayConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_WECHATPAY</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerWechatpayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerWechatpayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerWechatpayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerWechatpayConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerWechatpayValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerWechatpayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerWechatpayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerWechatpayValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Wechatpay">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_WECHATPAY</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerWechatpayValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerWechatpayValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerAuthorizeAndCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Przelewy24 payment method-->
    <virtualType name="UnzerPrzelewy24Config" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_PRZELEWY24</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrzelewy24ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerPrzelewy24Config</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrzelewy24ValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerPrzelewy24ConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrzelewy24ValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerPrzelewy24Config</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrzelewy24ValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerPrzelewy24ValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Przelewy24">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_PRZELEWY24</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerPrzelewy24ValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerPrzelewy24ValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Bancontact payment method-->
    <virtualType name="UnzerBancontactConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_BANCONTACT</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBancontactConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerBancontactConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBancontactValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerBancontactConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBancontactValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerBancontactConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerBancontactValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerBancontactValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Bancontact">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_BANCONTACT</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerBancontactValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerBancontactValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>

    <!--    Define types for Prepayment payment method-->
    <virtualType name="UnzerPrepaymentConfig" type="Unzer\PAPI\Model\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_PREPAYMENT</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrepaymentConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">UnzerPrepaymentConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrepaymentValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">UnzerPrepaymentConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Unzer\PAPI\Model\Config\CanCancelHandler</item>
                <item name="can_refund" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_refund_partial_per_invoice" xsi:type="string">Unzer\PAPI\Model\Config\CanRefundHandler</item>
                <item name="can_void" xsi:type="string">Unzer\PAPI\Model\Config\CanVoidHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrepaymentValidatorCountry" type="Unzer\PAPI\Model\Validator\CountryRestrictionValidator">
        <arguments>
            <argument name="config" xsi:type="object">UnzerPrepaymentConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="UnzerPrepaymentValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">UnzerPrepaymentValidatorCountry</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Unzer\PAPI\Model\Method\Prepayment">
        <arguments>
            <argument name="code" xsi:type="const">Unzer\PAPI\Model\Config::METHOD_PREPAYMENT</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Unzer\PAPI\Block\Info\Prepayment</argument>
            <argument name="valueHandlerPool" xsi:type="object">UnzerPrepaymentValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">UnzerPrepaymentValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">UnzerCaptureCommandPool</argument>
        </arguments>
    </type>
</config>
